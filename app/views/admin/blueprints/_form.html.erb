<%= form_for blueprint do |form| %>
  <% if blueprint.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(blueprint.errors.count, "error") %> prohibited this blueprint from being saved:</h2>

      <ul>
        <% blueprint.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <% if action_name == 'new' %>
    <div>
      <%= form.label :name, style: "display: block" %>
      <%= form.text_field :name %>
    </div>
  <% else %>
    <%= form.hidden_field :name %>
  <% end %>

  <div id="blueprint_fields">
    <table>
      <tr>
        <th class='field_number'>Order</th>
        <th class='display_label'>Label</th>
        <th class='solr_field_name'>Solr Field Name</th>
        <th class='searchable'>Searchable</th>
        <th class='facetable'>Facetable</th>
        <th class='search_results'>Search <br/>Results</th>
        <th class='item_view'>Item <br/>View</th>
        <th class='field_action'>Actions</th>
      </tr>

      <%= form.fields_for :fields do |field_form| %>
        <tr>
          <td class='field_number'><%= field_form.index + 1 %></td>
          <td class='display_label'><%= field_form.text_field :display_label %></td>
          <td class='solr_field_name'><%= field_form.text_field :solr_field_name %></td>
          <td class='searchable'><%= field_form.check_box :searchable %></td>
          <td class='facetable'><%= field_form.check_box :facetable %></td>
          <td class='search_results'><%= field_form.check_box :search_results %></td>
          <td class='item_view'><%= field_form.check_box :item_view %></td>
          <td class='field_action'>
            <%= form.button 'Delete', type: 'submit', name: 'manage_field[delete_field]', value: field_form.index, class: 'btn btn-sm btn-outline-danger' do %>
              <span class="btn-label bi bi-trash">Delete Field</span>
            <% end %>
          </td>
        </tr>
      <% end %>
      <tr>
        <td class='field_number'></td>
        <td class='field_action'>
          <%= form.button 'Add Field', type: 'submit', name: 'manage_field[add_field]', value: 'add_field', class: 'btn btn-sm btn-outline-dark' do %>
            <span class="btn-label bi bi-plus-square">Add a Field</span>
          <% end %>
        </td>
      </tr>
    </table>
  </div>

  <br/>
  <div>
    <%= form.submit class: 'btn btn-primary' %>
  </div>
<% end %>
